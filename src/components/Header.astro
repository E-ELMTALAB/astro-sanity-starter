---
import { type Header } from 'types';
import ResponsiveImage from '@components/ResponsiveImage.astro';

interface Props extends Header {
    'data-sb-field-path'?: string;
}

const { title, logo, navItems, 'data-sb-field-path': fieldPath } = Astro.props;
---

<nav class="px-4 py-5" data-sb-field-path={fieldPath}>
    <div class="mx-auto flex max-w-7xl items-center justify-between gap-6">
        <a class="flex items-center gap-2" href="/">
            {logo?.src ? (
                <span data-sb-field-path=".logo">
                    <ResponsiveImage
                        _id={logo._id}
                        src={logo.src}
                        width={logo.dimensions?.width ?? 120}
                        height={logo.dimensions?.height ?? 40}
                        alt={logo.alt || title || ''}
                        class="h-10 w-auto"
                    />
                </span>
            ) : (
                <span class="text-xl font-bold sm:text-2xl" data-sb-field-path=".title">
                    {title}
                </span>
            )}
        </a>
        {navItems?.length ? (
            <ul class="hidden items-center gap-6 text-sm font-semibold md:flex" data-sb-field-path=".navItems">
                {navItems.map((item, idx) => (
                    <li data-sb-field-path={`.${idx}`}>
                        <a
                            class="text-base-content/80 transition hover:text-base-content"
                            href={item.href || '#'}
                            data-sb-field-path=".label"
                        >
                            {item.label}
                        </a>
                    </li>
                ))}
            </ul>
        ) : null}
        {navItems?.length ? (
            <details class="dropdown dropdown-end md:hidden">
                <summary class="btn btn-ghost btn-circle">
                    <span class="sr-only">Open navigation</span>
                    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </summary>
                <ul class="menu dropdown-content rounded-box bg-base-100 p-4 shadow" data-sb-field-path=".navItems">
                    {navItems.map((item, idx) => (
                        <li data-sb-field-path={`.${idx}`}>
                            <a class="text-base-content/80" href={item.href || '#'} data-sb-field-path=".label">
                                {item.label}
                            </a>
                        </li>
                    ))}
                </ul>
            </details>
        ) : null}
    </div>
</nav>
